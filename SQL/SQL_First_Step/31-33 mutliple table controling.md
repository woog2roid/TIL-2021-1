SQL 첫걸음 책의 31-33강을 정리한 내용.

### 집합연산
(많이 중요하지는 않으니 빠르게 넘김)

- 합집합연산(UNION)
```
SELECT a AS c FROM sampleA 
UNION
SELECT b AS c FROM sampleB (ORDER BY c)
```
- 와 같이 열명이 달라도 합집합 연산을 할 수 있음
- 다만 order by를 쓰려면 맨 밑 select문에 써야하며 별명을 지어줘서 열명을 통일해야함
- 또한 기본적으로 중복이 제거되므로, 중복을 제거하지 않도록 해주는 ALL을 필요에 따라 붙여야함
```
SELECT * FROM sample1
UNION ALL
SELECT * FROM sample2
```

나머지 교집합과 차집합은... 자주 쓰이지 않으니....

__JOIN과 곱집합에 관해서는 [여기](https://futurists.tistory.com/17)가 설명을 잘하긴 했더라...__
### 곱집합

카티전 곱이라고 함. (선형대수의 그 cartesian product 맞음) / __JOIN의 기본__
- {a,b} * {1,2} = {a1 a2 b1 b2}가 된다.

예를 들어, 시즌3까지 나온 드라마가 매 시즌마다 6회씩 방송을 했다면,
- 카티전곱을 통해 시즌 * 횟수 로 18개를 뽑아낼 수 있을것.

교차결합
```
SELECT * FROM sample1, sample2
```
를 통해 sample1과 sample2를 교차결합 (카티전 곱) 시킬 수 있다.
- FROM에 복수의 테이블을 지정하면 교차결합함
- UNION과 다른점은 열의 갯수도 늘어난다는 것.

### 내부 결합 (JOIN/ INNER JOIN)
위에서 언급한 것이 교차결합이고, 내부결합은
```
SELECT * FROM 상품, 재고수 //교차결합에
WHERE 상품.상품코드 = 재고수.상품코드 //조건 붙이기
```
- 마트 운영 중, 상품 테이블과 재고수 테이블을 따로 관리한다고 생각하자,
- 상품테이블에는 기본키(코드)가 있고 상품명이 있으며, 재고 테이블에도 재고와 상품코드(기본키)가 있다.

곱집합을 WHERE에 조건을 붙여서 내부 결합을 할 수 있는데,
- __이는 몹시 구식방식이고 요즘은 그냥 JOIN을 제공한다.__
```
SELECT 상품.상품명, 재고수.재고수
FROM 상품 INNER JOIN 재고수
ON 상품.상품코드 = 재고수.상품코드
WHERE 상품.상품분류 = "식료품"
```
- inner join, join둘다 된다.
- on에는 결합 조건을 작성한다.
- where에는 나머지 조건들을 작성할 수 있다.

외부키: 다른 테이블의 기본키를 참조
- 상품 테이블에 "메이커 코드" 열이 있고 이를 통해 메이커 테이블에서 "메이커 이름"을 가져오면
- 외부키는 메이커 코드가 된다.

### 외부 결합 (LEFT JOIN RIGHT JOIN)
"어느 한 쪽에만 있는 데이터행을 어떻게 가져오지?"
- 내부결합은 둘다 있어야 했는데, (sample1.id = sample2.id), 아니 없어도 붙이고 싶은데?

실제로는, 마트에서 상품을 방금 등록해서 상품 테이블은 차있는데 재고수 테이블이 안차있으면,
- 아니 난 그래도 붙이고 싶다니까?
```
SELECT 상품.상품명, 재고수.재고수
FROM 상품 LEFT JOIN 재고수
ON 상품.상품코드 = 재고수.상품코드
WHERE 상품.상품분류 = "식료품"
```
- WHERE에 식료품은 그냥 넣은것... 식료품만 검색하고 싶었나보지...

여기서 주목할 점은 LEFT JOIN이다.

FROM 상품 LEFT JOIN 재고수이면, 상품에 있는 것들은 JOIN으로 만들어진 테이블에 모두 들어간다는 뜻
- 엥 그러면 없으면요? : 그냥 NULL로 처리되서 나온다.
	- 즉 있는 것들은 모두 쓰고, RIGHT TABLE에 없는데 LEFT엔 있다? 그러면 NULL로 처리함.

- RIGHT JOIN은 순서만 바뀐것.

### 관계형 모델
관계형 모델을 기반으로 작성된 DB는 관계형 DB라고 한다.
- 근데 안타깝게도, 관계형 모델에서 만들어진 SQL에서 쓰는 용어와 관계형 모델의 용어는 일치하지 않음

관계형 모델의 용어들 정리
- relation: 테이블
- attribute: 열
- tuple: 행
- 선택: 튜플의 추출, 제한 (SELECT WHERE)
- 투영: 속성의 추출, (SELECT에서 열을 지정하는것, SELECT id)
- 결합: JOIN